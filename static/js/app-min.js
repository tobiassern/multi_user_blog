jQuery(function($){function e(){var e=$(".lazybg");$.each(e,function(){var e=$(this);if(e.isOnScreen()===!0){var o=e.attr("data-bgimg");o&&(e.css("opacity","0"),$('<img src="'+o+'">').load(function(){e.removeClass("lazybg"),e.css("background-image","url("+o+")").animate({opacity:1},1e3)}))}})}$(window).scroll(function(){$(this).scrollTop()>50?$("#subHeader").addClass("fixed"):$("#subHeader").removeClass("fixed")}),$(window).scrollTop()>50&&$("#subHeader").addClass("fixed"),$(window).scroll(function(){e()}),$(window).resize(function(){e()}),e(),$("body").on("click",".btn-delete",function(e){confirm("Are you sure you want to delete this?")||e.preventDefault()}),$("body").on("click",".like-icon",function(){var e=$(this).attr("data-post-id"),o="/blog/"+e+"/like";$.ajax({type:"get",url:o,dataType:"json",success:function(e){0==e.logged_in?($(".like-error-msg").remove(),$(".like-icon").before('<p class="like-error-msg"><small>You need to <a href="/login">login</a> or <a href="/register">register</a> in order to like a post</small></p>')):1==e.error.has_error?($(".like-error-msg").remove(),$(".like-icon").before('<p class="like-error-msg"><small>'+e.error.error_msg+"</small></p>")):1==e.response.action&&(console.log(e.response.type),$(".likes-count").text(e.response.count),"liked"==e.response.type?$(".like-icon").addClass("liked"):$(".like-icon").removeClass("liked"))}})}),$(".img-file-upload").bind("change",function(){$(".image-error").remove(),this.files[0].size/1e6>1&&($(this).after('<p class="image-error">The image is to large</p>'),$(this).val(""))})}),jQuery.fn.isOnScreen=function(){var e=$(window),o={top:e.scrollTop(),left:e.scrollLeft()};o.right=o.left+e.width(),o.bottom=o.top+e.height();var r=this.offset();return r.right=r.left+this.outerWidth(),r.bottom=r.top+this.outerHeight(),!(o.right<r.left||o.left>r.right||o.bottom<r.top||o.top>r.bottom)};